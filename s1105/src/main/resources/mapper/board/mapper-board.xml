<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.site.ex.mapper.BoardMapper">

    <!-- 전체게시글 가져오기 -->
	<select id="selectList" resultType="com.site.ex.dto.BoardDto">
		select * from board order by bgroup desc,bstep asc
	</select>
    
    <!-- 게시글 1개 가져오기 -->
	<select id="selectBoardOne" resultType="com.site.ex.dto.BoardDto">
		select * from board where bid=#{bid}
	</select>
	
	<!-- 조회수 1증가 -->
	<update id="updateBhit">
	    update board set bhit=bhit+1 where bid=#{bid}
	</update>
	
	<!-- 게시글 1개 삭제하기 -->
	<delete id="boardDelete" >
	    delete board where bid=#{bid}
	</delete>
	
	<!-- 게시글 1개 업데이트 -->
	<update id="updateModify">
	    update board set btitle=#{btitle},bcontent=#{bcontent}
	    where bid=#{bid}
	</update>
	
	<!-- 게시글 1개 저장하기 : 쓰기 -->
	<insert id="insertWrite">
	    insert into board values(
	    b_seq.nextval,#{bname},#{btitle},#{bcontent},sysdate,
	    0,b_seq.currval,0,0,#{bupload} 
	    )
	</insert>
	
	<!-- 답변달기추가 //부모게시글 아래 있는 답변글에 1씩 증가 -->
	<update id="updateReplyPlus">
	    update board set btitle=#{btitle},bcontent=#{bcontent}
	    where bid=#{bid}
	</update>
	
	<!-- 게시글 1개 저장하기 : 답변달기 -->
	<insert id="insertReply">
	    insert into board values(
	    b_seq.nextval,#{bname},#{btitle},#{bcontent},sysdate,
	    0,#{bgroup},#{bstep+1},#{bindent+1},#{bupload} 
	    )
	</insert>
	
    
	
</mapper>	
	